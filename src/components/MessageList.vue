<template>
    <div class="message-list" @click="keySpace($event)">
        <MessagesListMessage v-for="(message,index) in messages" :key="index" :message="message"/>
    </div>
</template>

<script>
import MessagesListMessage from './MessagesListMessage';
import Vue from 'vue';

export default {
  props: ['messages'],
  watch: {
    messages(mes) {
      Vue.nextTick(() => {
        setTimeout(() => {
          this.$el.scrollTop = this.$el.scrollHeight;
        }, 550);
        // console.log(this)
        // console.log(this.$children[this.$children.length-1].$el.lastChild.children[1].innerHTML.split(/([\uD800-\uDBFF][\uDC00-\uDFFF])/))
        document.querySelector('button').style.background = '#ffd88b';
        if (this.$children[this.$children.length - 1].$el.getAttribute('value') == 'Hexya') {
          this.$children[this.$children.length - 1].$el.style.flexDirection = 'row-reverse';
        }
        const reg = /^[A-Za-z =.+Ã¹%'1234567890Â°?Ã©Ã¨@<,azeÃ #aÃ§zeazTonÍ Í–Í…Í’Ì¿ÌšÌ…Ì‚Í†Í˜Í‘Í€ÍÍƒÌŠÍ‘Ì½ÍƒÍƒÌˆÌ“Ì‚Í›ÌÌ‘Í„Ì’Ì‚ÌÌ”Ì¿Í†Í’Í Í†Í˜ÌŠÍ‘ÌÍ„Í’Ì’Ì‘ÍÌšÌ†ÍÌÌ“Ì„ÌÌ‡Ì½Ì’Í—ÌÌƒÍ˜Ì½Ì‘Ì”Í‘ÌÌÌ‰Ì•Ì”ÍÌ‰ÍÌ‘Í’Ì’ÍŒÍ†ÍÍÍÌ‚Í’ÍƒÌƒÍ›ÍÌŽÌÌ‡Í—Í‚Í‘ÌšÌ‰ÍƒÌ ÌžÌ«ÌžÌ¹ÌœÍ•Ì«Ì«Ì¨Ì¦ÌœÍ‰Ì»Í…Í™Ì˜;:=Ø£Ø¨Ù„Ù‡Ã¹``^^1234567890Â°_]+$/;
        const word = this.$children[this.$children.length - 1].$el.lastChild.children[1].innerHTML.split(/([\uD800-\uDBFF][\uDC00-\uDFFF])/);
        if (word.join().match(reg)) {
          // console.log('only letter')
          console.log(word.join());
          const splitWord = word.join().split('');

          const emojiArray = ['ðŸ¶', 'ðŸ±', 'ðŸ­', 'ðŸ¹', 'ðŸ°', 'ðŸ»', 'ðŸ¼', 'ðŸ¨', 'ðŸ¯', 'ðŸ®', 'ðŸ·', 'ðŸ½', 'ðŸ¸', 'ðŸ™', 'ðŸµ', 'ðŸ™ˆ', 'ðŸ™‰', 'ðŸ™Š', 'ðŸ’', 'ðŸ§', 'ðŸ¦', 'ðŸ¤', 'ðŸ£', 'ðŸ¥', 'ðŸº', 'ðŸ—', 'ðŸ´', 'ðŸ', 'ðŸ›', 'ðŸŒ', 'ðŸž', 'ðŸœ', 'ðŸ', 'ðŸ¢', 'ðŸ ', 'ðŸŸ', 'ðŸ¡', 'ðŸ¬', 'ðŸ³', 'ðŸ‹', 'ðŸŠ', 'ðŸ†', 'ðŸ…', 'ðŸƒ', 'ðŸ‚', 'ðŸ”', 'ðŸ„', 'ðŸª', 'ðŸ«', 'ðŸ˜', 'ðŸ', 'ðŸ', 'ðŸ‘', 'ðŸŽ', 'ðŸ–', 'ðŸ€', 'ðŸ', 'ðŸ“', 'ðŸ•', 'ðŸ©', 'ðŸˆ', 'ðŸ‡', 'ðŸ¾', 'ðŸ‰', 'ðŸ²', 'ðŸŒµ', 'ðŸŽ„', 'ðŸŒ²', 'ðŸŒ³', 'ðŸŒ´', 'ðŸŒ±', 'ðŸŒ¿', 'ðŸ€', 'ðŸŽ', 'ðŸŽ‹', 'ðŸƒ', 'ðŸ‚', 'ðŸ', 'ðŸŒ¾', 'ðŸŒº', 'ðŸŒ»', 'ðŸŒ¹', 'ðŸŒ¼', 'ðŸŒ·', 'ðŸŒ¸', 'ðŸ„', 'ðŸ’', 'ðŸŒ°', 'ðŸŽƒ', 'ðŸš', 'ðŸŒŽ', 'ðŸŒ', 'ðŸŒ', 'ðŸŒ•', 'ðŸŒ–', 'ðŸŒ—', 'ðŸŒ˜', 'ðŸŒ‘', 'ðŸŒ’', 'ðŸŒ“', 'ðŸŒ”', 'ðŸŒš', 'ðŸŒ', 'ðŸŒ›', 'ðŸŒœ', 'ðŸŒž', 'ðŸŒ™', 'â­', 'ðŸŒŸ', 'ðŸ’«', 'âœ¨', 'â›…', 'ðŸ”¥', 'ðŸ’¥', 'â„ï¸â›„', 'ðŸ’¨', 'â˜”', 'ðŸ’§', 'ðŸ’¦', 'ðŸŒŠ', 'ðŸ˜€', 'ðŸ˜¬', 'ðŸ˜', 'ðŸ˜‚', 'ðŸ˜ƒ', 'ðŸ˜„', 'ðŸ˜…', 'ðŸ˜†', 'ðŸ˜‡', 'ðŸ˜‰', 'ðŸ˜Š', 'ðŸ™‚', 'ðŸ˜‹', 'ðŸ˜Œ', 'ðŸ˜', 'ðŸ˜˜', 'ðŸ˜—', 'ðŸ˜™', 'ðŸ˜š', 'ðŸ˜œ', 'ðŸ˜', 'ðŸ˜›', 'ðŸ˜Ž', 'ðŸ˜', 'ðŸ˜¶', 'ðŸ˜', 'ðŸ˜‘', 'ðŸ˜’', 'ðŸ˜³', 'ðŸ˜ž', 'ðŸ˜Ÿ', 'ðŸ˜ ', 'ðŸ˜¡', 'ðŸ˜”', 'ðŸ˜•', 'ðŸ˜£', 'ðŸ˜–', 'ðŸ˜«', 'ðŸ˜©', 'ðŸ˜¤', 'ðŸ˜®', 'ðŸ˜±', 'ðŸ˜¨', 'ðŸ˜°', 'ðŸ˜¯', 'ðŸ˜¦', 'ðŸ˜§', 'ðŸ˜¥', 'ðŸ˜¢', 'ðŸ˜ª', 'ðŸ˜“', 'ðŸ˜­', 'ðŸ˜µ', 'ðŸ˜²', 'ðŸ˜·', 'ðŸ˜´', 'ðŸ’©', 'ðŸ’¤', 'ðŸ˜ˆ', 'ðŸ‘¿', 'ðŸ‘¹', 'ðŸ‘º', 'ðŸ’€', 'ðŸ‘»', 'ðŸ‘½', 'ðŸ˜º', 'ðŸ˜¸', 'ðŸ˜¹', 'ðŸ˜»', 'ðŸ˜¼', 'ðŸ˜½', 'ðŸ™€', 'ðŸ˜¿', 'ðŸ˜¾', 'ðŸ™Œ', 'ðŸ‘', 'ðŸ‘‹', 'ðŸ‘', 'ðŸ‘Ž', 'ðŸ‘Š', 'âœŠâœŒï¸', 'ðŸ‘Œ', 'âœ‹', 'ðŸ‘', 'ðŸ’ª', 'ðŸ™', 'â˜ï¸', 'ðŸ‘†', 'ðŸ‘‡', 'ðŸ‘ˆ', 'ðŸ‘‰', 'ðŸ’…', 'ðŸ‘„', 'ðŸ‘…', 'ðŸ‘‚', 'ðŸ‘ƒ', 'ðŸ‘€', 'ðŸ‘¤', 'ðŸ‘¥', 'ðŸ‘¶', 'ðŸ‘¦', 'ðŸ‘§', 'ðŸ‘¨', 'ðŸ‘©', 'ðŸ‘±', 'ðŸ‘´', 'ðŸ‘µ', 'ðŸ‘²', 'ðŸ‘³', 'ðŸ‘®', 'ðŸ‘·', 'ðŸ’‚', 'ðŸŽ…', 'ðŸ‘¼', 'ðŸ‘¸', 'ðŸ‘°', 'ðŸš¶', 'ðŸƒ', 'ðŸ’ƒ', 'ðŸ‘¯', 'ðŸ‘«', 'ðŸ‘¬', 'ðŸ‘­'];
          // console.log(splitWord.length)
          for (let i = 0; i < splitWord.length; i++) {
            splitWord[i] = emojiArray[Math.floor(Math.random() * Math.floor(emojiArray.length))];
          }
          splitWord[2] = 'ðŸ˜€';
          // console.log(splitWord.toString().replace(/\,/g,""))
          this.$children[this.$children.length - 1].$el.lastChild.children[1].innerHTML = splitWord.toString().replace(/\,/g, '');
        }
      });
    },
  },
  methods: {
    keySpace($event) {
      // console.log(this)
      // console.log(this.$el.lastChild)
      // console.log($event)
      this.$el.lastChild.lastChild.classList.add('space');
      setTimeout(() => {
        this.$el.lastChild.lastChild.classList.remove('space');
      }, 250);
    },
  },
  components: {
    MessagesListMessage,
  },
};
</script>

<style lang="scss">
    .message-list {
        overflow-y: scroll;
        height: calc(100% - 277px);
        border-bottom: 5px solid #eef2ff;
        background: #eef2ff;
        position: relative;
    }
</style>
